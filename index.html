<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Pursuit of Value — 7×7 Program</title>
<meta name="description" content="Seven chapters. Seven days each. Quote → cumulative exercise with progressive overload."/>
<style>
  :root{
    --bg:#0b1210; --ink:#eaf7f1; --muted:#a8c3b9; --card:#0f1814; --line:rgba(255,255,255,.08);
    --accent:#29d66f; --accent2:#129a58; --r:18px; --sh:0 14px 34px rgba(0,0,0,.35)
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Arial;color:var(--ink);
    background:radial-gradient(1000px 700px at 80% -10%, #163a2b 0%, #0b1512 40%, #0b1210 70%) , #0b1210}
  .wrap{max-width:980px;margin:0 auto;padding:20px}
  .row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
  .card{background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)), var(--card);
    border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--sh);padding:14px}
  .btn{border:1px solid var(--line);background:#0e1814;color:var(--ink);border-radius:12px;padding:9px 12px;cursor:pointer}
  .primary{background:linear-gradient(160deg,var(--accent),var(--accent2));color:#06371f;border:none;font-weight:700}
  h1{font-size:20px;margin:0}
  .muted{color:var(--muted);font-size:13px}
  .grid{display:grid;grid-template-columns:1.2fr 1fr;gap:14px}
  @media (max-width:900px){.grid{grid-template-columns:1fr}}
  .pill{background:#0b1512;border:1px solid var(--line);border-radius:999px;padding:8px 12px;font-size:12px;color:var(--muted)}
  .big{display:grid;place-items:center;padding:18px;border-radius:24px;background:linear-gradient(160deg,#0f1f1a,#0b1512);border:1px solid var(--line)}
  .cta{width:220px;height:220px;border:none;border-radius:50%;font-weight:800;font-size:18px;letter-spacing:.2px;cursor:pointer;
    background: radial-gradient(85% 85% at 50% 20%, #4affb4, var(--accent) 55%, var(--accent2) 100%);
    box-shadow: inset 0 -8px 16px rgba(0,0,0,.18), 0 30px 60px rgba(18,166,90,.35)}
  .list{display:flex;flex-direction:column;gap:8px;max-height:420px;overflow:auto}
  .item{display:grid;grid-template-columns:60px 1fr 80px;gap:8px;align-items:center;padding:10px;background:#0b1512;border:1px solid var(--line);border-radius:12px}
  #map{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
  .node{background:#0b1512;border:1px solid var(--line);border-radius:12px;padding:8px;text-align:center;font-size:12px}
  .node.lock{opacity:.45;filter:grayscale(.3)}
  /* modal */
  .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.55);padding:18px}
  .modal.open{display:grid}
  .sheet{width:min(720px,96vw);background:var(--card);border:1px solid var(--line);border-radius:18px;box-shadow:var(--sh);padding:16px}
  blockquote{margin:0;padding:10px 12px;border-left:3px solid var(--accent);background:#0a1411;border-radius:8px}
  textarea{width:100%;background:#0a1411;border:1px solid var(--line);color:var(--ink);padding:12px 14px;border-radius:12px;font-size:15px}
  ul{margin:8px 0 0 18px}
</style>
</head>
<body>
  <div class="wrap">
    <header class="row" style="justify-content:space-between">
      <div class="row">
        <div style="width:40px;height:40px;border-radius:50%;background:conic-gradient(from 270deg,var(--accent),#71f7b7,var(--accent2) 65%,#0d7c48 85%,var(--accent))"></div>
        <div>
          <h1>Pursuit of Value</h1>
          <div class="muted">Seven chapters. Seven days each. Quote → cumulative exercise with overload.</div>
        </div>
      </div>
      <div class="row">
        <button class="btn" id="exportBtn">Export</button>
        <label class="btn" for="importFile">Import<input id="importFile" type="file" accept="application/json" hidden></label>
        <button class="btn" id="resetBtn">Reset</button>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <div class="row" style="justify-content:space-between">
          <div>
            <div class="muted">Next session</div>
            <div id="lessonTitle" style="font-weight:700">—</div>
            <div class="muted" id="chapterTheme">—</div>
          </div>
          <div class="row">
            <div class="pill" id="stepPill">Day 1/7</div>
            <div class="pill" id="chapPill">Chapter 1/7</div>
          </div>
        </div>
        <div class="big" style="margin-top:8px">
          <button class="cta" id="start">Start</button>
        </div>
        <div style="height:10px"></div>
        <div class="card" style="padding:10px">
          <div class="muted">Map</div>
          <div id="map"></div>
        </div>
      </section>

      <aside class="card">
        <div class="row" style="justify-content:space-between">
          <div style="font-weight:700">History</div>
          <div class="muted">Newest first</div>
        </div>
        <div class="list" id="history"></div>
      </aside>
    </div>
  </div>

  <!-- Modal: session -->
  <div class="modal" id="modal">
    <div class="sheet">
      <div class="row" style="justify-content:space-between">
        <div id="stageTitle" style="font-weight:700">Session</div>
        <button class="btn" id="close">✕</button>
      </div>

      <div id="quoteWrap" style="margin-top:8px">
        <div class="muted">Quote of the day</div>
        <blockquote id="quote"></blockquote>
      </div>

      <div id="exerciseWrap" style="margin-top:12px;display:none">
        <div style="font-weight:700" id="exerciseTitle">Exercise</div>
        <div class="muted" id="exerciseBase">—</div>
        <div class="muted" id="overload" style="margin-top:6px;color:#c7e9d6">—</div>
        <div style="height:8px"></div>
        <textarea id="answer" rows="5" placeholder="Write here…"></textarea>
        <div class="row" style="justify-content:flex-end;margin-top:8px">
          <button class="btn primary" id="save">Save</button>
        </div>
      </div>

      <div class="row" style="justify-content:flex-end;margin-top:8px">
        <button class="btn" id="next">Next</button>
      </div>
    </div>
  </div>

<script>
/* =================== Quotes: 7 per chapter (day-specific) =================== */
const QUOTES = [
  // 1. METHOD
  [
    "Our solitude isn’t a handicap that we have to overcome before we can start work. It is the work.",
    "We should then be suspicious of monolithic perspectives as much as the idea that life or any complex phenomenon is simply an incoherent jumble of events.",
    "Value also becomes intelligible as an inescapable movement of consciousness through time, space and circumstance which requires the production of appropriate values, suitably adjudicated by choice.",
    "Personal action is a form of philosophical method.",
    "Consciousness offers a unique and special portal to apprehending the world, not least to the world of our own conscious existence.",
    "Understanding the first person phenomena of consciousness will involve first person methods.",
    "Humanly and intellectually, we have further to go."
  ],
  // 2. VALUE
  [
    "Where there is consciousness, there is also value.",
    "Choice as ‘selection’ is one of the grounds of value.",
    "Values abound in the world and they present themselves in a variety of ways which include external objects, relations between object, and within mind and consciousness itself.",
    "The underlying presence of value is seldom recognised.",
    "It becomes difficult to view the world without parallel conceptions of value as attributes of our concern with the world.",
    "Value can be regarded as a choice and as a preference.",
    "We would expect to be able to find value in places apart from within even human cognition."
  ],
  // 3. MYTHOLOGY / RELIGION
  [
    "As a form of mythology, religion is a means of going to places that conceptual precision cannot reach, and it offers particular access to consciousness, value and value experience.",
    "With religion, mankind is able to reach deeply into himself with greater clarity, power and effect.",
    "Religious myth has a descriptive advantage over normal cognitive thought in that it escapes the limitations of realism and objectivism in its representations and descriptions.",
    "God is the highest conceivable value or ‘ideal’ that is able to represent the struggle for value to the point of ultimate sacrifice.",
    "Religion is also a powerful metaphor of self and in its capacities of representation and magnitude, it is able to function for many as both the experience and explanation of value.",
    "The splendid capacity of religion for the experience of extraordinary value is accompanied by significant shortcomings.",
    "Religion can reveal and express aspects of human value hidden to demands of precision, clarity and reason."
  ],
  // 4. ETHICS
  [
    "Ethics has a special place within human life, yet its privileged position and status are by no means assured.",
    "The inherent vagueness, indeterminability and ‘uncodifiability’ of ethics as a category of human understanding returns us to the view that ethics is an essentially human activity.",
    "Ethical events are experienced as special because of their ability to reflexively attribute value to their agents.",
    "Principles, abstractions and physical objects can only possess attributed value, whereas conscious or sentient beings can have intrinsic value.",
    "The notion of value-maximisation is similarly lacking in refinement, but it can be usefully contrasted to the kind of value that we are developing here.",
    "Other-people have a special and privileged status with respect to our actions and relations with the world due to the kind of objects or beings that we can rationally or legitimately grace with value beyond their function or usefulness.",
    "All these features and more must be catered to, both in an adequate account of ethics and in human life."
  ],
  // 5. MEANING
  [
    "Questions of meaning and purpose appeal to a synoptic view of life and thereby find themselves in a far wider scope than the problems of everyday life.",
    "Meaning and purpose are routed through mortality.",
    "Such, then, is the demand upon a theory of meaning that it be able to withstand loss.",
    "Indifference at a time of significant personal loss would be considered aberrant, pathological or even inhuman.",
    "It might be ethically adequate to have good intentions without recourse to ‘truth’ and without a conventional purpose in life.",
    "Within a secular system mental states such as meaningfulness that stand in opposition to loss are vulnerable to reasons and argument denying their objectivity and justifying the concomitant loss in value.",
    "No particular belief is able to capture the truth at the heart of life."
  ],
  // 6. MIND
  [
    "Self-consciousness stands at the gateway to the deeper aspirations of mind.",
    "Cognition and thought are the ‘home’ and the ‘dwelling place’ of consciousness.",
    "Affective and cognitive states are entangled with each other because they are both constituents of mind.",
    "The mind-body debate is still hostage to a pattern of growth between undetected confusion and healthy ignorance, in an abundance of explanatory accounts which fail to explain.",
    "An adequate awareness of mind should be eventually able to eliminate common fallacies, rather than be preoccupied with them.",
    "It is an objective of this work to find a position for philosophy of mind and to pose a theory of mind that can be systematically expounded.",
    "Consciousness and value are central concerns of human life, even while truth and objectivity remain problematic."
  ],
  // 7. COGNITION
  [
    "The focus of this present chapter is the dialectic between cognition and affective states, particularly between cognition and a sufficiency of value.",
    "Each, in turn, functionally supports the other according to the circumstances of life.",
    "As a first pass into the future, the supportive function of cognition is suggested as a possible resolution.",
    "There is, however, more to subjective existentialism than an alienated observer of the world.",
    "Cognitive states of value do not have affective content, which is required for values according to our concept of them.",
    "But we cannot, however, do without cognitive support even if it can be shown to have all the shortcomings just listed.",
    "If cognition and knowledge cannot be ends in themselves, what then are their most compelling claims to value?"
  ]
];

/* =================== Program spec =================== */
const PROGRAM = [
  { name:"Method", theme:"Philosophy as disciplined self-inquiry.",
    base:"Observe the mechanism of choosing and valuing.",
    overload:[
      "Describe one recent choice.",
      "Describe how you decided.",
      "Identify the value that guided it.",
      "Name one unchosen option and its cost.",
      "Find a pattern across the last three entries.",
      "Condense your method of valuing in ≤ 12 words.",
      "Act today using that personal method once."
    ]},
  { name:"Value", theme:"Value is selection, not possession.",
    base:"Extract ‘value-kernels’ from experience.",
    overload:[
      "One moment that felt valuable.",
      "Why was it valuable?",
      "What quality mattered most?",
      "Phrase that quality in 6 words.",
      "Another moment with the same quality.",
      "Can the quality exist without the object?",
      "Create that quality deliberately today."
    ]},
  { name:"Mythology", theme:"Roles and stories distort value.",
    base:"Separate value from identity roles.",
    overload:[
      "List main social roles.",
      "Pick one; what value do you chase through it?",
      "Express that value outside the role.",
      "Perform such an act once.",
      "Describe the feeling of separation from the role.",
      "Shorten your list; keep only value labels.",
      "Live one day without invoking the role mentally."
    ]},
  { name:"Ethics", theme:"Live values, not rules.",
    base:"Replace judgment with enacted value.",
    overload:[
      "Recall one moral judgment you made.",
      "Identify its underlying value.",
      "Act on that value without judging.",
      "Notice resistance or pride.",
      "One sentence linking humility to value.",
      "Apply to another small judgment.",
      "Summarize your ethical pattern in 10 words."
    ]},
  { name:"Meaning", theme:"Meaning = value that survives loss.",
    base:"Practice equanimity under absence.",
    overload:[
      "Name a current loss.",
      "Name what value remains possible now.",
      "Do a small act serving it.",
      "Reflect on felt sufficiency.",
      "Imagine another future loss; repeat the pattern.",
      "Condense the pattern into one sentence.",
      "Use that sentence as a mantra today."
    ]},
  { name:"Mind", theme:"Attention is the medium of value.",
    base:"Rest awareness on value quality, not object.",
    overload:[
      "30 s silent focus on bodily sensation.",
      "Name the quality felt.",
      "Hold attention on the quality, not location.",
      "Repeat 60 s twice today.",
      "Describe how stability changes perception.",
      "Extend to 90 s; note drift count.",
      "Define ‘valuing without object’ in your words."
    ]},
  { name:"Cognition", theme:"Thinking should serve valuing.",
    base:"Compress understanding; express clearly.",
    overload:[
      "Write one sentence capturing your current insight.",
      "Delete half the words.",
      "Speak it aloud; refine phrasing.",
      "Explain it to a skeptic.",
      "Make it universal: remove ‘I’.",
      "Turn it into a guiding maxim.",
      "Enact one decision by that maxim."
    ]}
];

/* =================== State =================== */
const LS_KEY = "pov_7x7_v2"; // reset key for new logic
function load(){
  try{ return JSON.parse(localStorage.getItem(LS_KEY)) || {
    chapter:0, day:0,
    entries:[]
  }; }catch(e){ return {chapter:0, day:0, entries:[]}; }
}
const S = load();
function save(){ localStorage.setItem(LS_KEY, JSON.stringify(S)); }

/* =================== UI refs =================== */
const $=s=>document.querySelector(s), $$=s=>Array.from(document.querySelectorAll(s));
const lessonTitle=$('#lessonTitle'), chapterTheme=$('#chapterTheme'), stepPill=$('#stepPill'), chapPill=$('#chapPill');
const start=$('#start'), map=$('#map'), historyEl=$('#history');
const modal=$('#modal'), closeBtn=$('#close'), nextBtn=$('#next');
const quoteWrap=$('#quoteWrap'), quoteEl=$('#quote');
const exerciseWrap=$('#exerciseWrap'), exTitle=$('#exerciseTitle'), exBase=$('#exerciseBase'), exOver=$('#overload'), answer=$('#answer');
const exportBtn=$('#exportBtn'), importFile=$('#importFile'), resetBtn=$('#resetBtn');

/* =================== Render =================== */
function render(){
  const ch=PROGRAM[S.chapter]; const day=S.day+1;
  lessonTitle.textContent = `${ch.name} — Day ${day}`;
  chapterTheme.textContent = ch.theme;
  stepPill.textContent = `Day ${day}/7`;
  chapPill.textContent = `Chapter ${S.chapter+1}/7`;
  renderMap();
  renderHistory();
}
function renderMap(){
  map.innerHTML="";
  PROGRAM.forEach((c,i)=>{
    const n=document.createElement('div');
    n.className='node'+(i>S.chapter?' lock':'');
    const status = i<S.chapter ? '✓' : (i===S.chapter? `Day ${S.day+1}/7` : 'Locked');
    n.textContent = `${i+1}. ${c.name} · ${status}`;
    map.appendChild(n);
  });
}
function renderHistory(){
  const arr=[...S.entries].sort((a,b)=> a.ts<b.ts?1:-1);
  historyEl.innerHTML = arr.map(e=>{
    const label = `${PROGRAM[e.chapter].name} · Day ${e.day+1}`;
    const d = new Date(e.ts);
    return `<div class="item">
      <div class="muted" style="text-align:center">${d.toLocaleDateString(undefined,{year:'numeric',month:'short',day:'numeric'})}</div>
      <div><div style="font-weight:700">${label}</div><div class="muted">${(e.note||'').replace(/[<>&]/g,s=>({'<':'&lt;','>':'&gt;','&':'&amp;'}[s]))||'(no note)'}</div></div>
      <div class="muted" style="text-align:right">#${e.chapter+1}.${e.day+1}</div>
    </div>`;
  }).join('');
}

/* =================== Session flow =================== */
let stage=0; // 0=quote, 1=exercise
start.onclick=()=> openSession();
nextBtn.onclick=()=> {
  if(stage===0){
    stage=1;
    quoteWrap.style.display='none';
    exerciseWrap.style.display='block';
    nextBtn.style.display='none';
  }
};
closeBtn.onclick=()=> modal.classList.remove('open');

function buildCumulative(chIndex, dayIndex){
  // returns HTML list of tasks Day1..DayN (exact repetition cumulates)
  const items = PROGRAM[chIndex].overload.slice(0, dayIndex+1)
    .map((t,i)=>`<li>Day ${i+1} — ${t}</li>`).join('');
  return `<div class="muted">Do the following today:</div><ul>${items}</ul>`;
}

function openSession(){
  stage=0; answer.value="";
  const ch=PROGRAM[S.chapter];
  quoteEl.textContent = QUOTES[S.chapter][S.day] || '';
  exTitle.textContent = "Exercise";
  exBase.textContent = ch.base;
  exOver.innerHTML = buildCumulative(S.chapter, S.day);
  quoteWrap.style.display='block';
  exerciseWrap.style.display='none';
  nextBtn.style.display='inline-block';
  modal.classList.add('open');
}

// test-friendly: allow multiple runs per day
function complete(){
  const entry = {ts: Date.now(), chapter:S.chapter, day:S.day, note:answer.value.trim()};
  S.entries.push(entry);
  if(S.day<6){ S.day++; }
  else { S.day=0; if(S.chapter<6) S.chapter++; }
  save();
  modal.classList.remove('open');
  render();
}

document.getElementById('save').onclick = complete;

/* =================== Export / Import / Reset =================== */
exportBtn.onclick = ()=>{
  const blob=new Blob([JSON.stringify(S,null,2)],{type:'application/json'});
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='pursuit-of-value-7x7.json'; a.click(); URL.revokeObjectURL(a.href);
};
importFile.onchange = async e=>{
  const f=e.target.files[0]; if(!f) return;
  try{ const obj=JSON.parse(await f.text());
    if(typeof obj.chapter!=="number" || typeof obj.day!=="number") throw new Error('invalid');
    Object.assign(S,obj); save(); render();
  }catch{ alert('Invalid file'); }
  e.target.value='';
};
resetBtn.onclick=()=>{
  if(!confirm('Delete all progress?')) return;
  localStorage.removeItem(LS_KEY); location.reload();
};

/* =================== Init =================== */
render();

document.addEventListener('keydown', e=>{
  if(['INPUT','TEXTAREA'].includes(document.activeElement.tagName)) return;
  if(e.key.toLowerCase()==='s') start.click();
});
</script>
</body>
</html>
